[gd_scene load_steps=24 format=4 uid="uid://qujhsvriffxk"]

[ext_resource type="Shader" uid="uid://0vacnrh74wjb" path="res://world/bg.gdshader" id="1_gia2e"]
[ext_resource type="PackedScene" uid="uid://cas1ebkgs1kfw" path="res://entities/world/SpawnNest.tscn" id="1_kopsk"]
[ext_resource type="Script" uid="uid://ce6jxw7xe1a86" path="res://world/game.gd" id="1_ndgmm"]
[ext_resource type="PackedScene" uid="uid://b14dvx67drebc" path="res://entities/player/Player.tscn" id="1_yrunw"]
[ext_resource type="Shader" uid="uid://cxjhjvndfeyuk" path="res://misc/logic/biomes.gdshader" id="2_h1bdy"]
[ext_resource type="Shader" uid="uid://m2ujlgdhoe3n" path="res://world/emptiness_border.gdshader" id="4_7c4bj"]
[ext_resource type="Script" uid="uid://dgegklgqwvpxa" path="res://lib/script/char_texture.gd" id="4_i4b1j"]
[ext_resource type="Script" uid="uid://by5pvpniu1o1d" path="res://editor/bakeable_noise.gd" id="5_nrtoj"]
[ext_resource type="TileSet" uid="uid://cr8mn87yb0vyh" path="res://world/Tiles.tres" id="7_8mymi"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_7c4bj"]
shader = ExtResource("2_h1bdy")
shader_parameter/seed = 0
shader_parameter/FREQUENCY = 10.0
shader_parameter/JITTER = 1.0

[sub_resource type="Curve" id="Curve_1imk8"]
_data = [Vector2(0, 0), 0.0, 6.42857, 0, 0, Vector2(0.486667, 1), 0.0, -3.64992, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_crsqw"]
curve = SubResource("Curve_1imk8")

[sub_resource type="Curve" id="Curve_f5g5g"]
_data = [Vector2(0.52, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), -6.42858, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_8mymi"]
curve = SubResource("Curve_f5g5g")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_2nmfm"]
particle_flag_disable_z = true
emission_shape = 1
emission_sphere_radius = 60.0
angle_min = 45.0
angle_max = 45.0
gravity = Vector3(0, 0, 0)
radial_accel_min = 0.999998
radial_accel_max = 25.0
scale_min = 2.0
scale_max = 6.0
scale_curve = SubResource("CurveTexture_8mymi")
color = Color(1, 1, 1, 0.313726)
alpha_curve = SubResource("CurveTexture_crsqw")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_i4b1j"]
shader = ExtResource("1_gia2e")
shader_parameter/alpha_mult = 0.05
shader_parameter/landing_effect = 1.0
shader_parameter/placeholder_effect = 0.0
shader_parameter/peace_effect = 0.0
shader_parameter/default_effect = 0.0
shader_parameter/minefield_effect = 0.0

[sub_resource type="Image" id="Image_crsqw"]
data = {
"data": PackedByteArray("/////w=="),
"format": "RGBA8",
"height": 1,
"mipmaps": false,
"width": 1
}

[sub_resource type="ImageTexture" id="ImageTexture_o1tcx"]
image = SubResource("Image_crsqw")
script = ExtResource("4_i4b1j")
metadata/_custom_type_script = "uid://dgegklgqwvpxa"

[sub_resource type="FastNoiseLite" id="FastNoiseLite_i4b1j"]
noise_type = 0
frequency = 0.02
fractal_octaves = 2
fractal_lacunarity = 5.0

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_gqh78"]
width = 600
height = 1
noise = SubResource("FastNoiseLite_i4b1j")
seamless = true
script = ExtResource("5_nrtoj")
metadata/_custom_type_script = "uid://by5pvpniu1o1d"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_nrtoj"]
shader = ExtResource("4_7c4bj")
shader_parameter/noise = SubResource("NoiseTexture2D_gqh78")

[sub_resource type="Gradient" id="Gradient_qpjny"]

[sub_resource type="GradientTexture2D" id="GradientTexture2D_nrtoj"]
gradient = SubResource("Gradient_qpjny")
width = 1
height = 256
fill_to = Vector2(0, 1)

[node name="World" type="Node2D"]
script = ExtResource("1_ndgmm")

[node name="BiomeMap" type="SubViewport" parent="."]
size = Vector2i(1024, 1024)
render_target_update_mode = 0

[node name="ColorRect" type="ColorRect" parent="BiomeMap"]
material = SubResource("ShaderMaterial_7c4bj")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Spores" type="GPUParticles2D" parent="."]
amount = 100
lifetime = 15.0
preprocess = 20.0
visibility_rect = Rect2(-1500, -1500, 3000, 3000)
process_material = SubResource("ParticleProcessMaterial_2nmfm")

[node name="Background" type="Sprite2D" parent="."]
material = SubResource("ShaderMaterial_i4b1j")
scale = Vector2(20450, 20450)
texture = SubResource("ImageTexture_o1tcx")

[node name="WorldEnemySpawnAttempt" type="Timer" parent="."]
wait_time = 5.0
autostart = true

[node name="EmptinessBorder" type="Line2D" parent="."]
material = SubResource("ShaderMaterial_nrtoj")
points = PackedVector2Array(10240, 0, 0, 10240, -10240, 0, 0, -10240)
closed = true
width = 40.0
texture = SubResource("GradientTexture2D_nrtoj")
texture_mode = 2
antialiased = true

[node name="EmptinessDamage" type="Timer" parent="."]
wait_time = 0.1

[node name="Structures" type="Node2D" parent="."]

[node name="NewTiles" type="TileMapLayer" parent="Structures"]
position = Vector2(-10, -10)
tile_map_data = PackedByteArray("AAD4/wAAAAAAAAAAAAD5////AAAAAAAAAAD5/wAAAAACAAAAAAD5/wEAAAAAAAAAAAD6//7/AAAAAAAAAAD6////AAACAAAAAAD6/wAAAAAAAAAAAAD6/wEAAAACAAAAAAD6/wIAAAAAAAAAAAD7//7/AAACAAAAAAD7////AAAAAAAAAAD7/wAAAAAAAAAAAAD7/wEAAAAAAAAAAAD7/wIAAAACAAAAAAD7/wMAAAAAAAAAAAD8//z/AAABAAAAAAD8//3/AAABAAAAAAD8////AAAAAAAAAAD8/wAAAAAAAAAAAAD8/wEAAAAAAAAAAAD8/wIAAAAAAAAAAAD8/wMAAAABAAAAAAD8/wQAAAABAAAAAAD9//z/AAABAAAAAAD9//3/AAAAAAAAAAD9//7/AAAAAAAAAAD9/wAAAAAAAAAAAAD9/wEAAAAAAAAAAAD9/wIAAAAAAAAAAAD9/wMAAAAAAAAAAAD9/wQAAAABAAAAAAD+//z/AAAAAAAAAAD+//3/AAAAAAAAAAD+//7/AAAAAAAAAAD+/wAAAAAAAAAAAAD+/wEAAAAAAAAAAAD+/wIAAAAAAAAAAAD+/wMAAAAAAAAAAAD+/wQAAAAAAAAAAAD/////AAAAAAAAAAD//wEAAAAAAAAAAAAAAP//AAAAAAAAAAAAAAEAAAAAAAAAAAABAP7/AAAAAAAAAAABAP//AAAAAAAAAAABAAAAAAAAAAAAAAABAAIAAAAAAAAAAAACAP3/AAAAAAAAAAACAP7/AAAAAAAAAAACAP//AAAAAAAAAAACAAAAAAAAAAAAAAACAAIAAAAAAAAAAAACAAMAAAAAAAAAAAADAPz/AAABAAAAAAADAP3/AAAAAAAAAAADAP7/AAAAAAAAAAADAP//AAAAAAAAAAADAAAAAAAAAAAAAAADAAEAAAAAAAAAAAADAAMAAAAAAAAAAAADAAQAAAABAAAAAAAEAP3/AAABAAAAAAAEAP7/AAAAAAAAAAAEAP//AAAAAAAAAAAEAAAAAAAAAAAAAAAEAAEAAAAAAAAAAAAEAAMAAAABAAAAAAAEAAQAAAABAAAAAAAFAP7/AAACAAAAAAAFAP//AAAAAAAAAAAFAAAAAAAAAAAAAAAFAAEAAAAAAAAAAAAFAAIAAAACAAAAAAAGAP//AAACAAAAAAAGAAAAAAAAAAAAAAAGAAEAAAACAAAAAAAGAAIAAAAAAAAAAAAHAAAAAAACAAAAAAAHAAEAAAAAAAAAAAAIAAAAAAAAAAAAAAD9//v/AAAAAAAAAAD9/wUAAAAAAAAAAAD+//r/AAAAAAAAAAD+//v/AAACAAAAAAD+/wUAAAACAAAAAAD+/wYAAAAAAAAAAAD///n/AAAAAAAAAAD///r/AAACAAAAAAD///v/AAAAAAAAAAD///z/AAAAAAAAAAD///3/AAAAAAAAAAD///7/AAAAAAAAAAD//wIAAAAAAAAAAAD//wMAAAAAAAAAAAD//wQAAAAAAAAAAAD//wUAAAAAAAAAAAD//wYAAAACAAAAAAD//wcAAAAAAAAAAAAAAPn/AAACAAAAAAAAAPr/AAAAAAAAAAAAAPv/AAAAAAAAAAAAAPz/AAAAAAAAAAAAAP3/AAAAAAAAAAAAAP7/AAAAAAAAAAAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAcAAAACAAAAAAAAAAgAAAAAAAAAAAABAPr/AAACAAAAAAABAPv/AAAAAAAAAAABAPz/AAAAAAAAAAABAP3/AAAAAAAAAAABAAMAAAAAAAAAAAABAAQAAAAAAAAAAAABAAUAAAAAAAAAAAABAAYAAAACAAAAAAABAAcAAAAAAAAAAAACAPv/AAACAAAAAAACAPz/AAAAAAAAAAACAAQAAAAAAAAAAAACAAUAAAACAAAAAAACAAYAAAAAAAAAAAADAAUAAAAAAAAAAAD7//3/AAAAAAAAAAD8//7/AAAAAAAAAAD9////AAAAAAAAAAD+////AAAAAAAAAAD//wAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAAAAAAAAAAACAAEAAAAAAAAAAAADAAIAAAAAAAAAAAAEAAIAAAAAAAAAAAAFAAMAAAAAAAAAAAAHAP//AAAAAAAAAAAGAP7/AAAAAAAAAAAFAP3/AAAAAAAAAAAEAPz/AAABAAAAAAADAPv/AAAAAAAAAAACAPr/AAAAAAAAAAABAPn/AAAAAAAAAAAAAPj/AAAAAAAAAAD7//z/AAAAAAAAAAD7//v/AAAAAAAAAAD8//v/AAAAAAAAAAAEAPv/AAAAAAAAAAAFAPv/AAAAAAAAAAAFAPz/AAAAAAAAAAAFAAQAAAAAAAAAAAAFAAUAAAAAAAAAAAAEAAUAAAAAAAAAAAD7/wQAAAAAAAAAAAD7/wUAAAAAAAAAAAD8/wUAAAAAAAAAAAD6/wMAAAAAAAAAAAD5/wIAAAAAAAAAAAD4/wEAAAAAAAAAAAD4////AAAAAAAAAAD5//7/AAAAAAAAAAD6//3/AAAAAAAAAAD9//r/AAAAAAAAAAD+//n/AAAAAAAAAAD///j/AAAAAAAAAAABAPj/AAAAAAAAAAACAPn/AAAAAAAAAAADAPr/AAAAAAAAAAAGAP3/AAAAAAAAAAAHAP7/AAAAAAAAAAAIAP//AAAAAAAAAAAIAAEAAAAAAAAAAAAHAAIAAAAAAAAAAAAGAAMAAAAAAAAAAAADAAYAAAAAAAAAAAACAAcAAAAAAAAAAAABAAgAAAAAAAAAAAD//wgAAAAAAAAAAAD+/wcAAAAAAAAAAAD9/wYAAAAAAAAAAAA=")
tile_set = ExtResource("7_8mymi")

[node name="SpawnNest" parent="Structures" instance=ExtResource("1_kopsk")]

[node name="Bullets" type="Node2D" parent="."]

[node name="Entities" type="Node2D" parent="."]

[node name="Player" parent="." instance=ExtResource("1_yrunw")]

[connection signal="timeout" from="WorldEnemySpawnAttempt" to="." method="spawn_attempt"]
[connection signal="timeout" from="EmptinessDamage" to="." method="_on_emptiness_damage_timeout"]
